(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{4678:function(e,r,a){var t={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"73332","./en-il.js":"73332","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var r=i(e);return a(r)}function i(e){if(!a.o(t,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t[e]}s.keys=function(){return Object.keys(t)},s.resolve=i,e.exports=s,s.id="4678"},c155:function(e,r,a){"use strict";a.r(r);var t=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("q-page",{staticClass:"q-pa-md"},[a("q-select",{attrs:{"option-label":"city","emit-value":"","map-options":"","option-value":"id",options:e.cityOptions,label:"Ciudad"},on:{input:e.cambiarCiudad},model:{value:e.citySelect,callback:function(r){e.citySelect=r},expression:"citySelect"}}),a("q-separator",{staticClass:"q-my-md"}),a("q-input",{attrs:{outlined:"",label:"id Restaurant"},model:{value:e.txt_id_rest,callback:function(r){e.txt_id_rest=r},expression:"txt_id_rest"}}),a("q-btn",{on:{click:e.getLocalesFecha}},[e._v("Obtener locales fechas")]),a("q-btn",{on:{click:e.addMerchant}},[e._v("AÃ±adir")]),a("li",e._l(e.listaMerchantPromo,(function(r){return a("ul",{key:r.id},[e._v("\n      "+e._s(r.name)+"\n      -\n      "+e._s(r.id)+"\n    ")])})),0),a("q-input",{attrs:{outlined:"",placeholder:"2020-10-01"},model:{value:e.fechaSeleccionada,callback:function(r){e.fechaSeleccionada=r},expression:"fechaSeleccionada"}}),a("q-input",{attrs:{outlined:"",placeholder:"2020-10-01"},model:{value:e.fechaSeleccionada2,callback:function(r){e.fechaSeleccionada2=r},expression:"fechaSeleccionada2"}}),a("div",{staticClass:"q-gutter-sm"},[a("q-checkbox",{attrs:{label:"Es por Kilometro?"},model:{value:e.promoKM,callback:function(r){e.promoKM=r},expression:"promoKM"}})],1),a("q-input",{attrs:{outlined:"",disable:e.promoKM,label:"Creditos a depositar"},model:{value:e.creditos,callback:function(r){e.creditos=r},expression:"creditos"}}),a("q-input",{attrs:{outlined:"",label:"Monto de la carrera (Promo 0bs, Domingo 5bs)"},model:{value:e.costo,callback:function(r){e.costo=r},expression:"costo"}}),a("q-btn",{on:{click:e.obtenerPedidosPromo}},[e._v("Ejecutar")]),a("br"),a("div",{staticClass:"row"},[a("div",{staticClass:"col-11"},[a("q-card",{staticClass:"my-card",attrs:{flat:"",bordered:""}},[e._v("\n        "+e._s(e.contadorCreditos)+"\n        "),a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Historial")])]),a("q-card-section",[a("q-scroll-area",{ref:"scrollAreaMenus",staticStyle:{height:"300px","max-width":"100%"}},e._l(e.arrayHistoryCreditos,(function(r,t){return a("div",{key:t},[e._v("\n              $\n              "),a("span",{staticClass:"text-weight-light"},[e._v(e._s(r))])])})),0)],1)],1)],1)])],1)},s=[],i=(a("28a5"),a("a34a")),o=a.n(i),n=(a("7514"),a("96cf"),a("c973")),c=a.n(n),d=a("c1df"),l=a.n(d),u=a("18d6"),p=a("21a6"),h={mounted:function(){},data:function(){return{arrayHistory:[],active:!1,cantOrdersTotal:0,cantOrderAssigned:0,refresh_handler:null,time_refresh:60,arrayHistoryDelivery:[],activeDelivery:!1,cantOrdersTotalDelivery:0,cantOrderAssignedDelivery:0,refresh_handler_delivery:null,time_refresh_delivery:60,time_refresh_accept:1,activeAccept:!1,cantOrderAccept:0,refresh_handler_accept:null,access_token:"5e26d40edd82f1035e8fe0d12e7304df",access_token_aux:"845c88964029c3c89451c8925a5bf093",citySelect:395,cityOptions:[{city:"Santa Cruz",id:395},{city:"Cochabamba",id:704},{city:"La Paz",id:818},{city:"Tarija",id:859},{city:"Sucre",id:933},{city:"Potosi",id:1796}],time_refresh_creditos:45,comprobandoCreditos:!1,refresh_handler_creditos:null,arrayHistoryCreditos:[],horaScript:"00",arrayListaMotos:[],contadorCreditos:"",arrayMotosCSV:[],txt_id_rest:"",listaMerchantPromo:[],listaDriversPromo:[],fechaSeleccionada:"",fechaSeleccionada2:"",lista_local_texto:"",promoKM:!0,promoDomingo:!1,creditos:5,costo:0,ciudadNombre:""}},methods:{getLocalesFecha:function(){var e=this;return c()(o.a.mark((function r(){var a,t;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(""==e.fechaSeleccionada||""==e.fechaSeleccionada2){r.next=16;break}return e.ciudadNombre=e.cityOptions.find((function(r){return r.id==e.citySelect})).city,a="https://patioserviceonline.com/api/v1/controllers/erpController.php?type=lista_locales_hora&fechaHora1="+e.fechaSeleccionada+"&fechaHora2="+e.fechaSeleccionada2+"&ciudad="+e.ciudadNombre,r.prev=3,r.next=6,e.$axios.get(a);case 6:t=r.sent,console.log(t.data),t.data.length>0&&t.data.forEach((function(r){e.txt_id_rest=r.id_local,e.addMerchant()})),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](3),console.log("GET locales",r.t0);case 14:r.next=17;break;case 16:alert("Faltan las fechas");case 17:case"end":return r.stop()}}),r,null,[[3,11]])})))()},addMerchant:function(){var e=this;return c()(o.a.mark((function r(){return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.txt_id_rest&&(0!=e.listaMerchantPromo.length&&(e.lista_local_texto+=","),e.listaMerchantPromo.push({name:"ID",id:e.txt_id_rest}),e.lista_local_texto+=e.txt_id_rest,e.txt_id_rest="");case 1:case"end":return r.stop()}}),r)})))()},obtenerRepartidores:function(){var e=this;return c()(o.a.mark((function r(){var a,t;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.arrayHistoryCreditos.push("Obteniendo lista de repartidores ("+l()().format("LTS")+")"),a="https://patioserviceonline.com/api/v1/controllers/erpController.php?type=lista_driver&fecha="+e.fechaSeleccionada.split(" ")[0],r.prev=2,r.next=5,e.$axios.get(a);case 5:return t=r.sent,r.abrupt("return",t.data);case 9:r.prev=9,r.t0=r["catch"](2),console.log("LISTA PEDIDOS PROMO",r.t0);case 12:case"end":return r.stop()}}),r,null,[[2,9]])})))()},obtenerPedidosPromo:function(){var e=this;return c()(o.a.mark((function r(){var a;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.promoKM?e.arrayHistoryCreditos.push("Opcion Carreras promocion por Kilometro ("+l()().format("LTS")+")"):e.arrayHistoryCreditos.push("Opcion Carreras promocion monto FIJO ("+l()().format("LTS")+")"),e.arrayMotosCSV.push("ID_REPARTIDOR,ID_PEDIDO,CREDITOS,KM,FECHA\n"),r.next=4,e.obtenerRepartidores();case 4:return e.listaDriversPromo=r.sent,e.arrayHistoryCreditos.push("Recorriendo la lista ("+l()().format("LTS")+")"),a=function(){var r=c()(o.a.mark((function r(){var a;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.asyncForEach(e.listaDriversPromo,function(){var r=c()(o.a.mark((function r(a){return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.recorrerPedidosDriver(a);case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 2:a=new Blob(e.arrayMotosCSV,{type:"text/csv;charset=utf-8"}),p.saveAs(a,"ReporteDeCreditos.csv"),e.arrayMotosCSV=[];case 5:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),r.next=9,a();case 9:case"end":return r.stop()}}),r)})))()},recorrerPedidosDriver:function(e){var r=this;return c()(o.a.mark((function a(){var t,s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r.arrayHistoryCreditos.push("Obteniendo pedidos del repartidor "+e.id_driver_jugno+" ("+l()().format("LTS")+")"),t="",""==r.fechaSeleccionada2?(console.log("NOrmal"),t="https://patioserviceonline.com/api/v1/controllers/erpController.php?type=lista_pedidos_driver&fecha="+r.fechaSeleccionada+"&id_driver="+e.id_driver_jugno+"&list_rest="+r.lista_local_texto):(console.log("Hora Personalizada"),t="https://patioserviceonline.com/api/v1/controllers/erpController.php?type=lista_pedidos_driver_hora&fechaHora1="+r.fechaSeleccionada+"&fechaHora2="+r.fechaSeleccionada2+"&id_driver="+e.id_driver_jugno+"&list_rest="+r.lista_local_texto+"&costo="+r.costo),a.prev=3,a.next=6,r.$axios.get(t);case 6:s=a.sent,s.data.length>0?r.promoKM?818==r.citySelect?r.tarifasLaPaz(e,s.data):395==r.citySelect?r.tarifasSantaCruz(e,s.data):r.arrayHistoryCreditos.push("La ciudad no esta disponible ("+l()().format("LTS")+")"):r.aumentarCreditoMoto(e,parseInt(s.data.length)*parseInt(r.creditos),r.fechaSeleccionada):r.arrayHistoryCreditos.push("El repartidor "+e.id_driver_jugno+" No tiene carreras ("+l()().format("LTS")+")"),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](3),console.log("RECORRER PEDIDOS",a.t0);case 13:case"end":return a.stop()}}),a,null,[[3,10]])})))()},tarifasSantaCruz:function(e,r){var a=this;return c()(o.a.mark((function t(){var s,i,n,c;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a.arrayHistoryCreditos.push("Recorriendo los "+r.length+" pedidos del repartidor "+e.id_driver_jugno+" ("+l()().format("LTS")+")"),s=0,i=0;i<r.length;i++)n=0,c=r[i],n=c.distancia_km>8?20:c.distancia_km>7?18:c.distancia_km>3?15:c.distancia_km>1.5?12:9,s=parseInt(s)+parseInt(n);return t.next=5,a.aumentarCreditoMoto(e,s,a.fechaSeleccionada);case 5:case"end":return t.stop()}}),t)})))()},tarifasLaPaz:function(e,r){var a=this;return c()(o.a.mark((function t(){var s,i,n,c;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a.arrayHistoryCreditos.push("Recorriendo los "+r.length+" pedidos del repartidor "+e.id_driver_jugno+" ("+l()().format("LTS")+")"),s=0,i=0;i<r.length;i++)n=0,c=r[i],n=c.distancia_km>7?20:c.distancia_km>6?18:c.distancia_km>3?15:c.distancia_km>2?12:10,s=parseInt(s)+parseInt(n);return t.next=5,a.aumentarCreditoMoto(e,s,a.fechaSeleccionada);case 5:case"end":return t.stop()}}),t)})))()},aumentarCreditoMoto:function(e,r,a){var t=this;return c()(o.a.mark((function s(){var i,n,c;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!(parseInt(r)>0)){s.next=22;break}return t.arrayHistoryCreditos.push("Acreditando "+r+" creditos al driver id "+e.id_driver_jugno+" de la fecha "+a+" ("+l()().format("LTS")+")"),i="https://api-panels.jugnoo.in:8020/give_user_credits",n=new URLSearchParams,n.append("type","1"),n.append("amount",r),n.append("reason",r+" creditos por pedidos promo de la fecha "+a),n.append("user_id",e.id_driver_jugno),n.append("user_type","1"),n.append("token",t.access_token_aux),s.prev=10,s.next=13,t.$axios.post(i,n);case 13:c=s.sent,"Success"==c.data.message?(t.arrayHistoryCreditos.push("Acreditado con exito: "+e.id_driver_jugno+" ("+l()().format("LTS")+")"),t.arrayMotosCSV.push(e.id_driver_jugno+",TOTAL,"+parseInt(r)+",ACREDITADO,"+t.fechaSeleccionada+"\n")):(t.arrayHistoryCreditos.push("Hubo un problema al debitar los creditos del driver ID: "+e.driver_id+" ("+l()().format("LTS")+")"),t.arrayMotosCSV.push(e.id_driver_jugno+",TOTAL,"+parseInt(r)+",ERROR,"+t.fechaSeleccionada+"\n")),s.next=20;break;case 17:s.prev=17,s.t0=s["catch"](10),console.log("No se pudo acreditar creditos del id "+e.driver_id,s.t0);case 20:s.next=23;break;case 22:t.arrayHistoryCreditos.push("No hay carreras para acreditar al driver id "+e.driver_id+" de la fecha "+a+" ("+l()().format("LTS")+")");case 23:case"end":return s.stop()}}),s,null,[[10,17]])})))()},comprobarHora:function(){if(395==this.citySelect||818==this.citySelect){var e=new Date,r=e.getHours();r==this.horaScript?this.comprobandoCreditos?this.arrayHistoryCreditos.push("Script en ejecuciÃ³n"+l()().format("LTS")+")"):(this.arrayHistoryCreditos.push("Ejecutando el script ("+l()().format("LTS")+")"),this.comprobandoCreditos=!0,this.getListaMotos()):(this.comprobandoCreditos=!1,this.contadorCreditos="",this.arrayHistoryCreditos=[],this.arrayHistoryCreditos.push("Esperando la hora "+this.horaScript+"  para ejecutar el script ("+l()().format("LTS")+")")),this.reset_timer_creditos()}else this.arrayHistoryCreditos.push("El Script no se ejcutara en esta ciudad ("+l()().format("LTS")+")")},getListaMotos:function(){var e=this;return c()(o.a.mark((function r(){var a,t,s,i;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.arrayMotosCSV.push("ID,NOMBRE,CARRERAS,SALDO CREDITO,BLOQUEADO,FECHA\n"),e.arrayHistoryCreditos.push("Obteniendo lista de repartidores ("+l()().format("LTS")+")"),a=3e3,t="https://api-panels.jugnoo.in:8020/get_driver_details_panel?city="+e.citySelect+"&email_id=null&vehicle_type=15&category=2&skip=0&limit="+a+"&token="+e.access_token_aux,r.prev=4,r.next=7,e.$axios.get(t);case 7:return s=r.sent,e.arrayListaMotos=s.data.data,e.arrayHistoryCreditos.push("Cantidad de repartidores obtenidos: "+e.arrayListaMotos.length+" ("+l()().format("LTS")+")"),i=function(){var r=c()(o.a.mark((function r(){var a;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.asyncForEach(e.arrayListaMotos,function(){var r=c()(o.a.mark((function r(a){return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.getCantidadCarreraRepartidor(a);case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 2:a=new Blob(e.arrayMotosCSV,{type:"text/csv;charset=utf-8"}),p.saveAs(a,"ReporteDeCreditos.csv"),e.arrayMotosCSV=[];case 5:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),r.next=13,i();case 13:r.next=18;break;case 15:r.prev=15,r.t0=r["catch"](4),console.log("GET MOTOS ERROR",r.t0);case 18:case"end":return r.stop()}}),r,null,[[4,15]])})))()},getCantidadCarreraRepartidor:function(e){var r=this;return c()(o.a.mark((function a(){var t,s,i;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=l()().subtract(1,"days").format("YYYY-MM-DD"),r.arrayHistoryCreditos.push("Obteniendo cantidad de carreras del Driver ID: "+e.driver_id+" de la fecha "+t+" ("+l()().format("LTS")+")"),s="https://api-panels.jugnoo.in:8020/getDriverRideDetails?driverId="+e.driver_id+"&rideDate="+t+"&token="+r.access_token_aux+"&cityId="+r.citySelect,a.prev=3,a.next=6,r.$axios.get(s);case 6:i=a.sent,i.data.data.rides.length>0?r.debitarCreditoMoto(e,i.data.data.rides[0].completed,t):r.arrayHistoryCreditos.push("Driver ID: "+e.driver_id+" No tiene carreras la fecha "+t+" ("+l()().format("LTS")+")"),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](3),console.log("GET CARRERAS MOTO ERROR",a.t0);case 13:case"end":return a.stop()}}),a,null,[[3,10]])})))()},debitarCreditoMoto:function(e,r,a){var t=this;return c()(o.a.mark((function s(){var i,n,c;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!(parseInt(r)>0)){s.next=22;break}return t.arrayHistoryCreditos.push("Debitando "+r+" creditos al driver id "+e.driver_id+" de la fecha "+a+" ("+l()().format("LTS")+")"),i="https://api-panels.jugnoo.in:8020/give_user_credits",n=new URLSearchParams,n.append("type","2"),n.append("amount",r),n.append("reason",r+" pedidos de la fecha "+a),n.append("user_id",e.driver_id),n.append("user_type","1"),n.append("token",t.access_token_aux),s.prev=10,s.next=13,t.$axios.post(i,n);case 13:c=s.sent,"Success"==c.data.message?t.verificarCreditos(e,r,a):t.arrayHistoryCreditos.push("Hubo un problema al debitar los creditos del driver ID: "+e.driver_id+" ("+l()().format("LTS")+")"),s.next=20;break;case 17:s.prev=17,s.t0=s["catch"](10),console.log("No se pudo debitar creditos del id "+e.driver_id,s.t0);case 20:s.next=23;break;case 22:t.arrayHistoryCreditos.push("No hay carreras para debitar al driver id "+e.driver_id+" de la fecha "+a+" ("+l()().format("LTS")+")");case 23:case"end":return s.stop()}}),s,null,[[10,17]])})))()},verificarCreditos:function(e,r,a){var t=this;return c()(o.a.mark((function s(){var i;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:i=parseInt(e.money_in_wallet)-parseInt(r),t.arrayHistoryCreditos.push("Verificando sus creditos para bloquear al driver id "+e.driver_id+" ("+l()().format("LTS")+")"),parseInt(i)<=0?(t.arrayHistoryCreditos.push("Omitiendo el bloqueo hasta el Lunes ID: "+e.driver_id+" ("+l()().format("LTS")+")"),t.arrayMotosCSV.push(e.driver_id+","+e.driver_name+","+parseInt(r)+","+parseInt(i)+",OMITIDO,"+a+"\n")):(t.arrayHistoryCreditos.push("Tiene "+i+" creditos, no se bloqueara al driver id "+e.driver_id+" ("+l()().format("LTS")+")"),t.arrayMotosCSV.push(e.driver_id+","+e.driver_name+","+parseInt(r)+","+parseInt(i)+",NO,"+a+"\n"));case 3:case"end":return s.stop()}}),s)})))()},bloquearDriver:function(e){var r=this;return c()(o.a.mark((function a(){var t,s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t="https://api-panels.jugnoo.in:8020/suspend_driver?",s=new URLSearchParams,s.append("suspension_reason_id",2745),s.append("suspension_reason_text","Otros"),s.append("driver_id[]",e.driver_id),s.append("suspend_comments","Creditos en contra, debe recargar para activarse"),s.append("admin_email"),s.append("token",r.access_token_aux),s.append("email_id","abhishek.kaushik+patio@jungleworks.com"),s.append("city",r.citySelect),s.append("suspension_type",2),a.prev=11,a.next=14,r.$axios.post(t,s);case 14:a.sent,r.arrayHistoryCreditos.push(e.driver_id+"Bloqueado hasta su proxima recarga  ("+l()().format("LTS")+")"),a.next=21;break;case 18:a.prev=18,a.t0=a["catch"](11),console.log("No se pudo bloquear el id "+e.driver_id,a.t0);case 21:case"end":return a.stop()}}),a,null,[[11,18]])})))()},asyncForEach:function(e,r){var a=this;return c()(o.a.mark((function t(){var s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=0;case 1:if(!(s<e.length)){t.next=8;break}return t.next=4,r(e[s],s,e);case 4:a.contadorCreditos=s+1+" de "+e.length;case 5:s++,t.next=1;break;case 8:case"end":return t.stop()}}),t)})))()},reset_timer_creditos:function(){var e=this;clearTimeout(this.refresh_handler_creditos),this.refresh_handler_creditos=setTimeout((function(){e.comprobarHora(),console.log("Refresh CREDITOS...")}),6e4*this.time_refresh_creditos)},cargarCiudad:function(){this.citySelect=u["a"].getItem("ciudad")||395},cambiarCiudad:function(){switch(this.citySelect){case 395:u["a"].set("ciudad",this.citySelect),u["a"].set("center",[-17.783384,-63.18203]);break;case 704:u["a"].set("ciudad",this.citySelect),u["a"].set("center",[-17.393868,-66.157481]);break;case 818:u["a"].set("ciudad",this.citySelect),u["a"].set("center",[-16.505147,-68.129631]);break;case 859:u["a"].set("ciudad",this.citySelect),u["a"].set("center",[-21.533739,-64.733768]);break;case 933:u["a"].set("ciudad",this.citySelect),u["a"].set("center",[-19.043361,-65.260071]);break}},validateNumber:function(){(this.time_refresh<1||""==this.time_refresh||null==this.time_refresh)&&(this.time_refresh=60)},validateNumberDelivery:function(){(this.time_refresh_delivery<1||""==this.time_refresh_delivery||null==this.time_refresh_delivery)&&(this.time_refresh_delivery=60)},change_mode:function(){this.active?(this.getOrders(),this.arrayHistory.push("El sistema MENUS esta ACTIVADO ("+l()().format("LTS")+")")):(clearTimeout(this.refresh_handler),this.arrayHistory.push("El Sistema MENUS esta DETENIDO ("+l()().format("LTS")+")"))},change_mode_accept:function(){this.activeAccept?(this.getOrdersAccept(),this.arrayHistory.push("El sistema ACEPTAR esta ACTIVADO ("+l()().format("LTS")+")")):(clearTimeout(this.refresh_handler_accept),this.arrayHistory.push("El Sistema ACEPTAR esta DETENIDO ("+l()().format("LTS")+")"))},change_mode_delivery:function(){this.activeDelivery?(this.getOrdersDelivery(),this.arrayHistoryDelivery.push("El sistema DELIVERY esta ACTIVADO ("+l()().format("LTS")+")")):(clearTimeout(this.refresh_handler_delivery),this.arrayHistoryDelivery.push("El Sistema DELIVERY esta DETENIDO ("+l()().format("LTS")+")"))},reset_timer:function(){var e=this;clearTimeout(this.refresh_handler),this.refresh_handler=setTimeout((function(){e.getOrders(),console.log("Refresh MENUS...")}),1e3*this.time_refresh)},reset_timer_accept:function(){var e=this;clearTimeout(this.refresh_handler_accept),this.refresh_handler_accept=setTimeout((function(){e.getOrdersAccept(),console.log("Refresh ACCEPT...")}),6e4*this.time_refresh_accept)},reset_timer_delivery:function(){var e=this;clearTimeout(this.refresh_handler_delivery),this.refresh_handler_delivery=setTimeout((function(){e.getOrdersDelivery(),console.log("Refresh DELIVERY...")}),1e3*this.time_refresh_delivery)},getOrdersDelivery:function(){var e=this;return c()(o.a.mark((function r(){var a,t,s,i;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.activeDelivery){r.next=16;break}return console.log("FINDING ORDERS DELIVERY..."),e.arrayHistoryDelivery.push("Obteniendo lista de ordenes DELIVERY... ("+l()().format("LTS")+")"),a=Date.now(),t=l()().format("YYYY-MM-DD"),s="https://prod-fatafat-new.jugnoo.in:4030/panel/view_orders?token="+e.access_token+"&secret=P7JlZXiRiIvSssQSSzqs&city_id="+e.citySelect+"&start_date="+t+"&end_date="+t+"&fetch_active_orders=1&sEcho=1&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=100&mDataProp_0=&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=false&mDataProp_2=&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=false&mDataProp_3=&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=false&mDataProp_4=&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=false&mDataProp_5=&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=false&mDataProp_6=&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=false&mDataProp_7=&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=false&mDataProp_8=&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=false&mDataProp_9=&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=false&mDataProp_10=&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=false&mDataProp_11=&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=false&sSearch=&bRegex=false&iSortCol_0=0&sSortDir_0=desc&iSortingCols=1&_="+a,r.prev=6,r.next=9,e.$axios.get(s);case 9:i=r.sent,e.filterOrderDelivery(i.data.aaData),r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](6),console.log("GET ORDERS DELIVERY PENDING ERROR: "+r.t0);case 16:e.reset_timer_delivery();case 17:case"end":return r.stop()}}),r,null,[[6,13]])})))()},getOrdersAccept:function(){var e=this;return c()(o.a.mark((function r(){var a,t,s,i;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.activeAccept){r.next=16;break}return console.log("FINDING ORDERS ACCEPT..."),e.arrayHistory.push("Obteniendo lista de ordenes para ACEPTAR... ("+l()().format("LTS")+")"),a=Date.now(),t=l()().format("YYYY-MM-DD"),s="https://prod-fresh-api.jugnoo.in:4040/admin/get_orders?token="+e.access_token+"&secret=P7JlZXiRiIvSssQSSzqs&city="+e.citySelect+"&start_date="+t+"&end_date="+t+"&fetch_pending_orders=1&statusCopy=[object%20Object]&status=0,1&sEcho=1&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=100&mDataProp_0=&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=false&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=false&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=false&mDataProp_4=&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=false&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=false&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=false&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=false&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=false&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=false&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=false&mDataProp_11=&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=false&sSearch=&bRegex=false&iSortCol_0=0&sSortDir_0=desc&iSortingCols=1&_= "+a,r.prev=6,r.next=9,e.$axios.get(s);case 9:i=r.sent,e.filterOrderAccept(i.data.aaData),r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](6),console.log("GET ORDERS ACCEPT ERROR: ",r.t0);case 16:e.reset_timer_accept();case 17:case"end":return r.stop()}}),r,null,[[6,13]])})))()},getOrders:function(){var e=this;return c()(o.a.mark((function r(){var a,t,s,i;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.active){r.next=16;break}return console.log("FINDING ORDERS MENUS..."),e.arrayHistory.push("Obteniendo lista de ordenes MENUS... ("+l()().format("LTS")+")"),a=Date.now(),t=l()().format("YYYY-MM-DD"),s="https://prod-fresh-api.jugnoo.in:4040/admin/get_orders?token="+e.access_token+"&secret=P7JlZXiRiIvSssQSSzqs&city="+e.citySelect+"&start_date="+t+"&end_date="+t+"&fetch_pending_orders=1&statusCopy=[object%20Object]&status=8&sEcho=1&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=500&mDataProp_0=&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=false&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=false&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=false&mDataProp_4=&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=false&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=false&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=false&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=false&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=false&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=false&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=false&mDataProp_11=&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=false&sSearch=&bRegex=false&iSortCol_0=0&sSortDir_0=desc&iSortingCols=1&_= "+a,r.prev=6,r.next=9,e.$axios.get(s);case 9:i=r.sent,e.filterOrderUnasigned(i.data.aaData),r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](6),console.log("GET ORDERS MENUS PENDING ERROR: ",r.t0);case 16:e.reset_timer();case 17:case"end":return r.stop()}}),r,null,[[6,13]])})))()},filterOrderDelivery:function(e){this.cantOrdersTotalDelivery=e.length;for(var r=0;r<e.length;r++){var a=e[r].status,t=e[r].dodo_delivery_id,s=e[r].order_id;0==a&&this.getDeliveryStatus(t,s)}},filterOrderAccept:function(e){for(var r=this,a=function(a){var t=e[a][13].status;if(0==t){var s=[36626,40376,41817,41816,41815,41813],i=s.find((function(r){return r==e[a][13].restaurant_id}));if(!i){var o=e[a][13].restaurant_id,n=e[a][13].order_id,c=e[a][13].user_id,d=e[a][7].split("<br/>")[0],u=e[a][7].split("<br/>")[1],p=u.split("-")[1],h=u.split("-")[0],_=u.split("-")[0].substring(0,h.length-2),f=u.split("-")[2],b="PM"==d.split(":")[1].split(" ")[1]&&"12"!=d.split(":")[0]?1*d.split(":")[0]+12:d.split(":")[0],m=d.split(":")[1].split(" ")[0],v=p+" "+_+", "+f+" "+b+":"+m+":00",S=new Date(v).getTime(),y=Date.now(),g=l()(y-S).format("mm");g>=5&&r.acceptOrder(n,o,c)}}},t=0;t<e.length;t++)a(t)},acceptOrder:function(e,r,a){var t=this;return c()(o.a.mark((function s(){var i,n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i="https://prod-fresh-api.jugnoo.in:4040/web/accept_order",n="token="+t.access_token+"&order_id="+e+"&restaurant_id="+r+"&user_id="+a+"&force_token=1&refund_customer=0&reason=",s.prev=2,s.next=5,t.$axios({url:i,method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:n});case 5:s.sent,t.arrayHistory.push("ORDER_ID: "+e+" ACEPTADO correctamente! ("+l()().format("LTS")+")"),t.cantOrderAccept++,s.next=14;break;case 10:s.prev=10,s.t0=s["catch"](2),console.log("AUTO ASIGNAR ERROR: ",s.t0),t.arrayHistory.push("ORDER_ID: "+e+" NO SE PUDO ACEPTAR ("+l()().format("LTS")+")");case 14:case"end":return s.stop()}}),s,null,[[2,10]])})))()},filterOrderUnasigned:function(e){this.cantOrdersTotal=e.length;for(var r=0;r<e.length;r++){var a=e[r][13].status,t=e[r][13].restaurant_id,s=e[r][13].order_id,i=(e[r][10],e[r][9]);0!=a&&"-"==i&&this.getDeliveryID(s,t)}},getDeliveryStatus:function(e,r){var a=this;return c()(o.a.mark((function t(){var s,i,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.arrayHistoryDelivery.push("Verificando para Auto Asignar Orden ID "+r+" DELIVERY ID "+e+" ("+l()().format("LTS")+")"),s="https://dodo.jugnoo.in:8024/get_complete_task_details",i="access_token="+a.access_token+"&order_id="+e,t.prev=3,t.next=6,a.$axios({url:s,method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:i});case 6:n=t.sent,6==n.data.data.status?(a.arrayHistoryDelivery.push("Auto Asignando Orden ID "+r+" DELIVERY ID "+e+" ("+l()().format("LTS")+")"),a.autoAssignDelivery(e)):a.arrayHistoryDelivery.push("No necesita Auto Asignar Orden ID "+r+" DELIVERY ID "+e+" ("+l()().format("LTS")+")"),t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](3);case 12:case"end":return t.stop()}}),t,null,[[3,10]])})))()},getDeliveryID:function(e,r){var a=this;return c()(o.a.mark((function t(){var s,i,n,c;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s="https://prod-fresh-api.jugnoo.in:4040/order_details",i="token="+a.access_token+"&order_id="+e+"&restaurant_id="+r,t.prev=2,t.next=5,a.$axios({url:s,method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:i});case 5:n=t.sent,c=n.data.order_info[0].delivery_id,a.arrayHistory.push("Auto Asignando ORDER_ID: "+e+" RESTAURANT_ID: "+r+" DELIVERY_ID: "+c+"... ("+l()().format("LTS")+")"),a.autoAssignMenus(c),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log("GET DELIVERY ID ERROR: "+t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,11]])})))()},autoAssignDelivery:function(e){var r=this;return c()(o.a.mark((function a(){var t;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t="https://dodo.jugnoo.in:8024/assign_driver",a.prev=1,a.next=4,r.$axios.post(t,{access_token:r.access_token,order_id:e,user_id:null});case 4:a.sent,r.arrayHistoryDelivery.push("DELIVERY_ID: "+e+" Auto Asignado con exito! ("+l()().format("LTS")+")"),r.cantOrderAssignedDelivery++,a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log("AUTO ASIGNAR ERROR: "+a.t0),r.arrayHistoryDelivery.push("DELIVERY_ID: "+e+" NO SE PUDO AUTO ASIGNAR ("+l()().format("LTS")+")");case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))()},autoAssignMenus:function(e){var r=this;return c()(o.a.mark((function a(){var t;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t="https://dodo.jugnoo.in:8024/assign_driver",a.prev=1,a.next=4,r.$axios.post(t,{access_token:r.access_token,order_id:e,user_id:null});case 4:a.sent,r.arrayHistory.push("DELIVERY_ID: "+e+" Auto Asignado con exito! ("+l()().format("LTS")+")"),r.cantOrderAssigned++,a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log("AUTO ASIGNAR ERROR: "+a.t0),r.arrayHistory.push("DELIVERY_ID: "+e+" NO SE PUDO AUTO ASIGNAR ("+l()().format("LTS")+")");case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))()}}},_=h,f=a("2877"),b=a("9989"),m=a("ddd8"),v=a("eb85"),S=a("27f9"),y=a("9564"),g=a("b047"),D=a("cb32"),x=a("f09f"),j=a("a370"),C=a("4983"),R=a("9c40"),k=a("8f8e"),w=a("eebe"),E=a.n(w),O=Object(f["a"])(_,t,s,!1,null,null,null);r["default"]=O.exports;E()(O,"components",{QPage:b["a"],QSelect:m["a"],QSeparator:v["a"],QInput:S["a"],QToggle:y["a"],QChip:g["a"],QAvatar:D["a"],QCard:x["a"],QCardSection:j["a"],QScrollArea:C["a"],QBtn:R["a"],QCheckbox:k["a"]})}}]);