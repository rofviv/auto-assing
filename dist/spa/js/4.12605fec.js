(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{4613:function(e,t,a){"use strict";var r=a("8a85"),o=a.n(r);o.a},4678:function(e,t,a){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"73332","./en-il.js":"73332","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(e){var t=n(e);return a(t)}function n(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=n,e.exports=o,o.id="4678"},"4d91":function(e,t,a){"use strict";var r=a("661c"),o=a.n(r);o.a},"661c":function(e,t,a){},"6c07":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("q-dialog",{model:{value:e.dialogPedidoDetalle,callback:function(t){e.dialogPedidoDetalle=t},expression:"dialogPedidoDetalle"}},[a("q-card",{staticClass:"text-center",staticStyle:{width:"500px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Pedido ID: "+e._s(e.pedidoDetalle.id_pedido))])]),a("q-card-section",{staticClass:"q-pt-none"},[e._v("\n        "+e._s(e.pedidoDetalle.nombre_restaurante)+"\n        "),a("div",[e._v("Cliente: "+e._s(e.pedidoDetalle.nombre_cliente)+" / "+e._s(e.pedidoDetalle.celular_cliente))]),a("div",[e._v("Estado del pedido: "+e._s(e.pedidoDetalle.estado))]),a("br"),a("table",{staticStyle:{margin:"auto"},attrs:{border:"1"}},[a("tr",[a("th",[e._v("Evento")]),a("th",[e._v("Hora")])]),a("tr",[a("td",[e._v("Creado")]),a("td",[e._v(e._s(e.pedidoDetalle.creado_en))])]),a("tr",[a("td",[e._v("Asignado")]),a("td",[e._v(e._s(e.pedidoDetalle.asignado_en||"Aun no completado"))])]),a("tr",[a("td",[e._v("Llegar al local")]),a("td",[e._v(e._s(e.pedidoDetalle.esperando_en||"Aun no completado"))])]),a("tr",[a("td",[e._v("En camino al cliente")]),a("td",[e._v(e._s(e.pedidoDetalle.despachado_en||"Aun no completado"))])]),a("tr",[a("td",[e._v("Esperar entregar al cliente")]),a("td",[e._v(e._s(e.pedidoDetalle.llegado_en||"Aun no completado"))])]),a("tr",[a("td",[e._v("Finalizado")]),a("td",[e._v(e._s(e.pedidoDetalle.finalizado_en||"Aun no completado"))])])])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"primary"}})],1)],1)],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 shadow-3"},[a("div",{staticStyle:{width:"100%"}},[a("q-tabs",{staticClass:"bg-primary text-white shadow-2",attrs:{"inline-label":""},on:{input:e.cargarDatosRover},model:{value:e.roverTab,callback:function(t){e.roverTab=t},expression:"roverTab"}},e._l(e.listRover,(function(e){return a("q-tab",{key:e.id,attrs:{name:e.id,icon:"adb",label:"Rover #"+e.id}})})),1)],1),a("q-card",{staticClass:"my-card",attrs:{flat:"",bordered:""}},[a("q-card-section",{attrs:{horizontal:""}},[a("q-card-section",{staticClass:"col-5 flex flex-center"},[a("q-img",{staticClass:"rounded-borders",attrs:{src:e.roverDetails.url_foto}})],1),a("q-card-section",{staticClass:"col-7 q-pt-xs"},[a("div",{staticClass:"full-width row wrap justify-between items-start content-start"},[a("div",{staticClass:"text-overline",style:1==e.roverDetails.en_linea?"color: green;":"color: red;"},[e._v(e._s(1==e.roverDetails.en_linea?"En linea":"Apagado"))]),1==e.roverDetails.en_linea?a("div",{staticClass:"text-overline",style:1==e.roverDetails.libre?"color: green;":"color: red;"},[e._v(e._s(1==e.roverDetails.libre?"Libre":"Ocupado"))]):e._e()]),a("div",{staticClass:"text-h5 q-mt-sm q-mb-sm"},[e._v("Rover #"+e._s(e.roverDetails.id))]),a("div",{staticClass:"text-grey"},[1==e.roverDetails.en_linea?[a("p",[e._v("Encendido: "+e._s(e.moment(e.roverDetails.hora_encendido).calendar()))])]:[a("p",[e._v("Apagado: "+e._s(e.moment(e.roverDetails.hora_apagado).calendar()))])],a("p",[e._v("Última sincronización: "+e._s(e.moment(e.roverDetails.ultima_sincronizacion).fromNow()))]),a("p",[e._v("Tarea actual: "+e._s(e.tareaActual.descripcion)+" "+e._s(e.moment(e.tareaActual.creado_en).fromNow()))]),a("div",{staticClass:"full-width row wrap justify-between items-center content-start"},[a("div",[a("div",{staticClass:"full-width row wrap justify-start items-center content-center"},[a("q-icon",{attrs:{color:"green",size:"24px",name:"battery_charging_full"}}),a("div",{staticClass:"text-caption text-green"},[e._v(e._s(e.roverDetails.bateria))])],1)]),a("div",[a("q-btn",{attrs:{color:"blue",round:"",flat:"",icon:"fas fa-video"}})],1),a("div",[a("q-btn",{attrs:{color:"blue",round:"",flat:"",icon:"fas fa-headset"}})],1),a("div",[a("q-btn",{attrs:{color:"red",round:"",flat:"",icon:"fas fa-volume-up"}})],1)])],2)])],1),a("q-separator"),a("q-card-actions",[a("q-btn",{attrs:{flat:"",round:"",icon:"store"}}),a("q-btn",{attrs:{flat:""}},[e._v("Detalles")]),a("q-btn",{attrs:{flat:"",color:"primary"}},[e._v("Configuración")]),a("q-btn",{attrs:{size:"12px",flat:"",color:"orange",dense:"",round:"",icon:"fas fa-map-marker-alt"},on:{click:function(t){return e.centrarMapa(null,3)}}}),a("q-btn",{staticStyle:{color:"#416675"},attrs:{size:"12px",flat:"",dense:"",round:"",icon:"fas fa-map-marker-alt"},on:{click:function(t){return e.centrarMapa(null,4)}}}),a("q-space"),a("q-btn",{attrs:{flat:"",color:"grey",icon:"refresh"},on:{click:e.cargarDatosRover}})],1)],1),a("div",{staticStyle:{height:"400px",width:"auto"}},[a("q-list",{attrs:{bordered:"",separator:""}},e._l(e.orderList,(function(t){return a("q-item",{key:t.id_pedido},[a("q-item-section",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(a){return e.mostrarPedidoEnMapa(t)}}},[a("q-item-label",[e._v("ID "+e._s(t.id_pedido))]),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.nombre_restaurante))]),a("q-item-label",{attrs:{caption:""}},[e._v("Registrado: "+e._s(e.moment(t.creado_en).fromNow()))]),0==t.estado?a("q-item-label",{staticStyle:{color:"orange"}},[e._v("Pendiente")]):1==t.estado?a("q-item-label",{staticStyle:{color:"green"}},[e._v("Asignado, en camino "+e._s(t.asignado_en))]):2==t.estado?a("q-item-label",{staticStyle:{color:"orange"}},[e._v("Esperando recoger el pedido "+e._s(t.esperando_en))]):3==t.estado?a("q-item-label",{staticStyle:{color:"green"}},[e._v("Despachado, en camino "+e._s(t.despachado_en))]):4==t.estado?a("q-item-label",{staticStyle:{color:"orange"}},[e._v("Esperando entregar el pedido "+e._s(t.llegado_en))]):5==t.estado?a("q-item-label",{staticStyle:{color:"green"}},[e._v("Pedido entregado "+e._s(t.finalizado_en))]):9==t.estado?a("q-item-label",{staticStyle:{color:"red"}},[e._v("Pedido cancelado")]):e._e()],1),a("q-item-section",{attrs:{top:"",side:""}},[a("div",{staticClass:"text-grey-8 q-gutter-xs"},[a("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"info"},on:{click:function(a){return e.mostrarDetallePedido(t)}}}),a("q-btn",{attrs:{size:"12px",flat:"",dense:"",round:"",icon:"more_vert"},on:{click:function(a){return e.opcionesPedido(t)}}})],1),a("div",{staticClass:"text-grey-8 q-gutter-xs q-mt-sm"},[a("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",color:"red",dense:"",round:"",icon:"fas fa-map-marker-alt"},on:{click:function(a){return e.centrarMapa(t,1)}}}),a("q-btn",{attrs:{size:"12px",flat:"",color:"blue",dense:"",round:"",icon:"fas fa-map-marker-alt"},on:{click:function(a){return e.centrarMapa(t,2)}}})],1)])],1)})),1)],1)],1),a("div",{staticClass:"col-8"},[a("map-tracking")],1)])],1)},o=[],n=a("a34a"),s=a.n(n),i=(a("96cf"),a("c973")),c=a.n(i),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("div",{staticStyle:{"z-index":"3",position:"absolute",height:"100%",width:"100%",padding:"0px","border-width":"0px",margin:"0px",left:"0px",top:"0px","touch-action":"pan-x pan-y"}},[a("l-map",{ref:"myMap",staticStyle:{"z-index":"0"},attrs:{zoom:e.zoom,center:e.center,options:{zoomControl:!1}}},[a("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),a("l-marker",{attrs:{"lat-lng":e.center,icon:e.icon_driver}})],1)],1)])},d=[],u=a("2699"),p=a("a40a"),v=a("4e2b"),f=(a("e11e"),a("6cc5"),{components:{"l-map":u["a"],"l-tile-layer":p["a"],"l-marker":v["a"]},data:function(){return{zoom:13,url:"https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',center:[-17.783384,-63.18203],icon_driver:L.icon({iconUrl:"http://patioserviceonline.com/sc/statics/marker-driver.png",iconSize:[64,64],iconAnchor:[30,64]})}}}),m=f,b=a("2877"),_=a("9989"),g=a("eebe"),h=a.n(g),j=Object(b["a"])(m,l,d,!1,null,null,null),k=j.exports;h()(j,"components",{QPage:_["a"]});var x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("div",{staticStyle:{"z-index":"3",position:"absolute",height:"100%",width:"100%",padding:"0px","border-width":"0px",margin:"0px",left:"0px",top:"0px","touch-action":"pan-x pan-y"}},[a("l-map",{ref:"myMap",staticStyle:{"z-index":"0"},attrs:{zoom:e.zoom,center:e.center_mapa,options:{zoomControl:!1}}},[a("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),a("l-marker",{attrs:{"lat-lng":e.center_origen,icon:e.markerOrigen}},[a("l-tooltip",[e._v("Origen")]),a("l-popup",[a("div",[e._v("Origen")])])],1),a("l-marker",{attrs:{"lat-lng":e.center_destino,icon:e.markerDestino}},[a("l-tooltip",[e._v("Destino")]),a("l-popup",[a("div",[e._v("Destino")])])],1),a("l-marker",{attrs:{"lat-lng":e.center_parqueo,icon:e.markerParqueo}},[a("l-tooltip",[e._v("Parqueo")]),a("l-popup",[a("div",[e._v("Parqueo")])])],1),a("l-polyline",{attrs:{"lat-lngs":e.ruta,color:"green"}}),a("l-marker",{attrs:{"lat-lng":e.center_user,icon:e.markerUser}},[a("l-tooltip",[e._v("Rover")]),a("l-popup",[a("div",[e._v("Rover")])])],1)],1)],1)])},y=[],w=(a("20d6"),a("f60f")),D=a("635f"),z=a("31dc"),q=(a("b24d"),a("bfac"),a("c1df")),C=a.n(q);C.a.locale("es");var R=L.AwesomeMarkers.icon({icon:"parking",prefix:"fa",markerColor:"cadetblue"}),P=L.AwesomeMarkers.icon({icon:"truck-pickup",prefix:"fa",markerColor:"orange"}),S=L.AwesomeMarkers.icon({icon:"store",prefix:"fa",markerColor:"red"}),$=L.AwesomeMarkers.icon({icon:"house-user",prefix:"fa",markerColor:"blue"}),M={components:{LMap:u["a"],LTileLayer:p["a"],LMarker:v["a"],LPopup:w["a"],LPolyline:D["a"],LTooltip:z["a"]},mounted:function(){return c()(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},data:function(){return{markerParqueo:R,markerUser:P,markerOrigen:S,markerDestino:$,nombre_conductor:"",placa_conductor:"",zoom:20,url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',refresh_handler:null,time_refresh:30,estadoConductor:"",ultimaSincronizacion:"",showDriver:!1,driver_id:null,ordenRastreo:{}}},methods:{rastrearOrden:function(){var e=this;return c()(s.a.mark((function t(){var a,r,o;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="https://taneneka.com/api/v1/?route=orden&type=rastrear",r="id="+e.$route.params.id,t.prev=2,t.next=5,e.$axios.post(a,r);case 5:o=t.sent,o.data.length>0?"0"!=o.data.estado?(e.ordenRastreo=o.data[0],e.nombre_conductor=e.ordenRastreo.nombre_conductor,e.placa_conductor=e.ordenRastreo.placa,e.center_origen=[e.ordenRastreo.lat_origen,e.ordenRastreo.lng_origen],e.center_destino=[e.ordenRastreo.lat_destino,e.ordenRastreo.lng_destino],e.driver_id=e.ordenRastreo.id_jugno,e.driver_id?e.getCoordsDriver():alert("No hay conductor asignado")):alert("Este envio ya se completo"):alert("Orden no encontrada"),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log("No se pudo rastrear",t.t0),alert(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()},reset_timer:function(){var e=this;clearTimeout(this.refresh_handler),this.refresh_handler=setTimeout((function(){e.getCoordsDriver(),console.log("Refresh DRIVER...")}),1e3*this.time_refresh)},getCoordsDriver:function(){var e=this;return c()(s.a.mark((function t(){var a,r,o,n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="https://api-panels.jugnoo.in:8020/get_driver_details?token=845c88964029c3c89451c8925a5bf093&city_id=997&status=0&delivery_enabled=1&is_delivery_panel=1",t.prev=1,t.next=4,e.$axios.get(a);case 4:r=t.sent,r.data.data.length>0?(o=r.data.data,n=o.findIndex((function(t){return t.driver_id==e.driver_id})),n>=0?(e.center_user=[o[n].current_latitude,o[n].current_longitude],e.zoom=13,e.showDriver=!0,e.estadoConductor="En linea",e.ultimaSincronizacion="Hace 30 segundos"):e.getCoordsDriverBusy()):e.getCoordsDriverBusy(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log("Driver Free",t.t0);case 11:e.reset_timer();case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},getCoordsDriverBusy:function(){var e=this;return c()(s.a.mark((function t(){var a,r,o,n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="https://api-panels.jugnoo.in:8020/get_driver_details?token=845c88964029c3c89451c8925a5bf093&city_id=997&status=1&delivery_enabled=1&is_delivery_panel=1",t.prev=1,t.next=4,e.$axios.get(a);case 4:r=t.sent,r.data.data.length>0?(o=r.data.data,n=o.findIndex((function(t){return t.driver_id==e.driver_id})),n>=0?(e.center_user=[o[n].current_latitude,o[n].current_longitude],e.zoom=13,e.showDriver=!0,e.estadoConductor="En linea",e.ultimaSincronizacion="Hace 30 segundos"):e.getDriverInactive()):e.getDriverInactive(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log("Driver Free",t.t0);case 11:e.reset_timer();case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},getDriverInactive:function(){var e=this;return c()(s.a.mark((function t(){var a,r,o,n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="https://api-panels.jugnoo.in:8020/get_driver_details?token=845c88964029c3c89451c8925a5bf093&city_id=997&status=2&delivery_enabled=1&is_delivery_panel=1",t.prev=1,t.next=4,e.$axios.get(a);case 4:r=t.sent,r.data.data.length>0&&(o=r.data.data,n=o.findIndex((function(t){return t.driver_id==e.driver_id})),n>=0?(e.center_user=[o[n].current_latitude,o[n].current_longitude],e.zoom=13,e.showDriver=!0,e.estadoConductor="Sin señal",e.ultimaSincronizacion=C()(o[n].last_active_time).fromNow()):alert("El conductor no esta disponible")),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log("Driver Inactive",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},computed:{ruta:function(){return this.$store.getters["geolocalizacion/getRuta"]},center_mapa:function(){return this.$store.getters["geolocalizacion/getCenterMapa"]},center_parqueo:function(){return this.$store.getters["geolocalizacion/getCenterParqueo"]},center_user:function(){return this.$store.getters["geolocalizacion/getCenterUser"]},center_origen:function(){return this.$store.getters["geolocalizacion/getCenterOrigen"]},center_destino:function(){return this.$store.getters["geolocalizacion/getCenterDestino"]}}},O=M,E=(a("4d91"),a("54e1")),Q=a("0016"),A=Object(b["a"])(O,x,y,!1,null,"3e7bc0cc",null),T=A.exports;h()(A,"components",{QPage:_["a"],QBanner:E["a"],QIcon:Q["a"]}),C.a.locale("es");var I={components:{MapRover:k,MapTracking:T},mounted:function(){this.getListaRover()},data:function(){return{dialogPedidoDetalle:!1,moment:C.a,roverTab:1,listRover:[],roverDetails:{},orderList:[],pedidoDetalle:{},tareaActual:"",refresh_handler:null,time_refresh:30}},methods:{reset_timer:function(){var e=this;clearTimeout(this.refresh_handler),this.refresh_handler=setTimeout((function(){e.cargarDatosRover(),console.log("Refresh ROVER ORDERS...")}),1e3*this.time_refresh)},getListaRover:function(){var e=this;return c()(s.a.mark((function t(){var a,r;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="https://patioserviceonline.com/api/v1/?route=rover&type=lista_rover&ciudad=Santa%20Cruz",t.prev=1,t.next=4,e.$axios.get(a);case 4:r=t.sent,r.data&&r.data.length>0&&(e.listRover=r.data,e.roverTab=e.listRover[0].id,e.roverDetails=e.listRover[0],e.$store.commit("geolocalizacion/centerUser",[e.roverDetails.lat,e.roverDetails.lng]),e.$store.commit("geolocalizacion/centerParqueo",[e.roverDetails.lat_parqueo,e.roverDetails.lng_parqueo]),e.cargarPedidosRover()),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log("Lista Rover",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},cargarDatosRover:function(){var e=this;return c()(s.a.mark((function t(){var a,r;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="https://patioserviceonline.com/api/v1/?route=rover&type=obtener_rover&id_rover="+e.roverTab,t.prev=1,t.next=4,e.$axios.get(a);case 4:r=t.sent,r.data.length>0&&(e.roverDetails=r.data[0],e.$store.commit("geolocalizacion/centerUser",[e.roverDetails.lat,e.roverDetails.lng]),e.$store.commit("geolocalizacion/centerParqueo",[e.roverDetails.lat_parqueo,e.roverDetails.lng_parqueo]),e.cargarPedidosRover()),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log("Lista Rover",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},cargarPedidosRover:function(){var e=this;return c()(s.a.mark((function t(){var a,r,o,n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.orderList=[],a=JSON.parse(e.roverDetails.lista),r=0;case 3:if(!(r<a.length)){t.next=19;break}return o="https://patioserviceonline.com/api/v1/?route=rover&type=lista_pedidos_restaurante&id_restaurante="+a[r],t.prev=5,t.next=8,e.$axios.get(o);case 8:n=t.sent,n.data.length>0&&(e.orderList=n.data),e.obtenerUltimoRegistroRover(),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](5),console.log("Obtener Pedidos",t.t0);case 16:r++,t.next=3;break;case 19:e.reset_timer();case 20:case"end":return t.stop()}}),t,null,[[5,13]])})))()},opcionesPedido:function(e){var t=this;this.$q.dialog({title:"Opciones disponibles",message:"<b>Seleccione una opción</b>",html:!0,options:{type:"radio",model:"entregado",items:[{label:"Marcar como entregado",value:"entregado"},{label:"Marcar como despachado",value:"despachado"},{label:"Cancelar el pedido",value:"cancelar_jugno"},{label:"Liberar el pedido para una moto",value:"liberar_pedido"},{label:"Quitar de la lista",value:"ocultar"}]},ok:{color:"negative",label:"Aceptar",push:!0},cancel:{label:"Volver",push:!0,color:"primary"}}).onOk((function(a){t.actualizarPedido(e,a)}))},actualizarPedido:function(e,t){return c()(s.a.mark((function a(){return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:alert(e.id_pedido+" "+t);case 1:case"end":return a.stop()}}),a)})))()},obtenerUltimoRegistroRover:function(){var e=this;return c()(s.a.mark((function t(){var a,r;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="https://patioserviceonline.com/api/v1/?route=rover&type=ultima_bitacora_rover&id_rover="+e.roverDetails.id,t.prev=1,t.next=4,e.$axios.get(a);case 4:r=t.sent,r.data.length>0&&(e.tareaActual=r.data[0]),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log("Obtener Pedidos",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},mostrarPedidoEnMapa:function(e){console.log(e),this.$store.commit("geolocalizacion/centerOrigen",[e.lat_restaurante,e.lng_restaurante]),this.$store.commit("geolocalizacion/centerDestino",[e.lat_pedido,e.lng_pedido]),this.$store.commit("geolocalizacion/centerMapa",[e.lat_restaurante,e.lng_restaurante])},mostrarDetallePedido:function(e){this.pedidoDetalle=e,this.dialogPedidoDetalle=!0},centrarMapa:function(e,t){switch(t){case 1:this.$store.commit("geolocalizacion/centerMapa",[e.lat_restaurante,e.lng_restaurante]);break;case 2:this.$store.commit("geolocalizacion/centerMapa",[e.lat_pedido,e.lng_pedido]);break;case 3:this.$store.commit("geolocalizacion/centerMapa",[this.roverDetails.lat,this.roverDetails.lng]);break;case 4:this.$store.commit("geolocalizacion/centerMapa",[this.roverDetails.lat_parqueo,this.roverDetails.lng_parqueo]);break}}}},N=I,U=(a("4613"),a("24e8")),B=a("f09f"),F=a("a370"),H=a("4b7e"),J=a("9c40"),V=a("429b"),G=a("7460"),K=a("58a8"),W=a("068f"),X=a("eb85"),Y=a("2c91"),Z=a("1c1c"),ee=a("66e5"),te=a("4074"),ae=a("0170"),re=a("7f67"),oe=a("714f"),ne=Object(b["a"])(N,r,o,!1,null,"0efde21e",null);t["default"]=ne.exports;h()(ne,"components",{QPage:_["a"],QDialog:U["a"],QCard:B["a"],QCardSection:F["a"],QCardActions:H["a"],QBtn:J["a"],QTabs:V["a"],QTab:G["a"],QBadge:K["a"],QImg:W["a"],QIcon:Q["a"],QSeparator:X["a"],QSpace:Y["a"],QList:Z["a"],QItem:ee["a"],QItemSection:te["a"],QItemLabel:ae["a"]}),h()(ne,"directives",{ClosePopup:re["a"],Ripple:oe["a"]})},"8a85":function(e,t,a){}}]);